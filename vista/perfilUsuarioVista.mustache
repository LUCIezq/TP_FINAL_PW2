<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Perfil</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <link href="/public/assets/header.css" rel="stylesheet">
  <link href="/public/assets/footer.css" rel="stylesheet">
  <link href="/public/assets/perfilUsuario.css" rel="stylesheet">

</head>

<body class="layout">

  <main class="container py-4">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10">

        <div class="mb-3">
          <a href="/home/index" class="btn-ghost back-link">
            <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M15 18l-6-6 6-6" />
            </svg>
            Volver al inicio
          </a>
        </div>

        <section class="card perfil-card p-3 p-md-4">
          <div class="d-flex align-items-center gap-3">
            <div class="avatar-wrap">
              <img src="{{{usuario.foto_perfil}}}" alt="Foto de perfil"
                class="avatar-img" width="96" height="96"
                onerror="this.src='/public/assets/img/default-avatar.png'">
            </div>

            <div class="flex-grow-1">
              <h2 class="m-0 nombre">{{usuario.nombre}} {{usuario.apellido}}</h2>
              <div class="texto-usuario">@{{usuario.nombre_usuario}}</div>

              <img src="{{qr}}" alt="QR" class="qr-code mt-2" width="96" height="96">

              <p class="m-0 mt-2 fs-5 text-primary">
                Puntos totales: <strong>{{usuario.puntos}}</strong>
              </p>

              <!--<span class="chip chip-info mt-2">
                Aciertos: {{usuario.porcentaje_acierto}}%
              </span>-->
            </div>

            </div>
          </div>

          <div id="map" class="w-100" style="height: 200px; margin-top: 20px;">

          </div>

          <div class="mt-4">
            <h5 class="seccion-titulo">Historial de partidas</h5>

            <ul class="list-group perfil-lista">
              <li class="list-group-item d-flex justify-content-between">
                Partidas jugadas
                <span class="badge rounded-pill stat">{{usuario.partidas_jugadas}}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                Partidas ganadas
                <span class="badge rounded-pill stat">{{usuario.partidas_ganadas}}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                Partidas perdidas
                <span class="badge rounded-pill stat">{{usuario.partidas_perdidas}}</span>
              </li>
            </ul>
          </div>

          <div class="mt-4">
            <h5 class="seccion-titulo">Rendimiento</h5>

            <ul class="list-group perfil-lista">
              <li class="list-group-item d-flex justify-content-between">
                Preguntas respondidas
                <span class="badge rounded-pill stat">{{usuario.total_respondidas}}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                Preguntas correctas
                <span class="badge rounded-pill stat">{{usuario.total_correctas}}</span>
              </li>
            </ul>
          </div>

          <div class="row g-2 mt-4 align-items-center">
            {{#isOwner}}
            <div class="col-12 col-sm-auto">
              <a href="/usuario/editar/{{usuario.id}}" 
                class="btn btn-outline-primary-soft w-100">Editar perfil</a>
            </div>
            {{/isOwner}}

            <!--<div class="col-12 col-sm-auto">
              <a href="/partidas/mis-partidas" 
                class="btn btn-primary-soft w-100">Ver partidas</a>
            </div>-->

            <div class="col-12 col-sm-auto ms-sm-auto">
              <a href="/login/logout" class="btn btn-danger-soft w-100">Cerrar sesi√≥n</a>
            </div>
          </div>
        </section>

      </div>
    </div>
  </main>

</body>
</html>
