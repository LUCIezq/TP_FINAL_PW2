<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Perfil</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Tu header/footer ya existentes -->
  <link href="/public/assets/header.css" rel="stylesheet">
  <link href="/public/assets/footer.css" rel="stylesheet">
  <!-- NUEVO CSS del perfil -->
  <link href="/public/assets/perfilUsuario.css" rel="stylesheet">
</head>

<body class="layout">

  <main class="container py-4">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10">

      <div class="mb-3">
  <a href="/home/index" class="btn-ghost back-link" aria-label="Volver al inicio">
    <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M15 18l-6-6 6-6"/>
    </svg>
    Volver al inicio
  </a>
</div>


        <!-- Card principal -->
        <section class="card perfil-card p-3 p-md-4">
          <div class="d-flex align-items-center gap-3">
            <div class="avatar-wrap">
              <img
                src="{{{usuario.foto_perfil}}}"
                alt="Foto de perfil"
                class="avatar-img"
                width="96" height="96"
                onerror="this.src='/public/assets/img/default-avatar.png'">
            </div>

            <div class="flex-grow-1">
              <h2 class="m-0 nombre">{{usuario.nombre}} {{usuario.apellido}}</h2>
              <div class="texto-usuario">@{{usuario.nombre_usuario}}</div>

              <img src ="{{qr}}" alt="Código QR de perfil" class="qr-code mt-2" width="96" height="96">

              <div class="d-flex flex-wrap gap-2 mt-2">
                <!-- Chips: experiencia y nivel -->
                <span class="chip chip-info">
                  {{#usuario.experienciaTitulo}}{{usuario.experienciaTitulo}}{{/usuario.experienciaTitulo}}{{^usuario.experienciaTitulo}}Puntos de experiencia{{/usuario.experienciaTitulo}}
                </span>
                <span class="chip chip-level">Nv. {{usuario.nivel}}</span>
              </div>
            </div>
          </div>

          <!-- Barra de experiencia -->
          <div class="mt-4">
            <div class="d-flex justify-content-between small mb-1">
              <span>Nivel {{usuario.nivel}}</span>
              <span>{{usuario.expActual}} / {{usuario.expSiguiente}} XP</span>
            </div>
            <div class="exp-bar">
              <div class="exp-fill" style="width: {{usuario.expPorcentaje}}%;"></div>
            </div>
            <div class="small text-muted mt-1">
              {{usuario.expRestante}} XP restante para Nv. {{usuario.nivelSiguiente}}
            </div>
          </div>

          <!-- Historial de partidas -->
          <div class="mt-4">
            <h5 class="seccion-titulo">Tu historial de partidas</h5>

            <ul class="list-group perfil-lista">
              <li class="list-group-item d-flex justify-content-between align-items-center">
                Partidas jugadas
                <span class="badge rounded-pill stat">{{usuario.partidas_jugadas}}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                Partidas ganadas
                <span class="badge rounded-pill stat">{{usuario.partidas_ganadas}}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                Partidas perdidas
                <span class="badge rounded-pill stat">{{usuario.partidas_perdidas}}</span>
              </li>
            </ul>
          </div>

          <div class="row g-2 mt-4 align-items-center">
  <div class="col-12 col-sm-auto">
    <a href="/usuario/editar/{{usuario.id}}" class="btn btn-outline-primary-soft w-100">Editar perfil</a>
  </div>
  <div class="col-12 col-sm-auto">
    <a href="/partidas/mis-partidas" class="btn btn-primary-soft w-100">Ver partidas</a>
  </div>

  <!-- empuja a la derecha desde sm -->
  <div class="col-12 col-sm-auto ms-sm-auto">
    <a href="/login/logout" class="btn btn-danger-soft w-100">Cerrar sesión</a>
  </div>
</div>
        </section>

      </div>
    </div>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
